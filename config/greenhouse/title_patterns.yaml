# Greenhouse Job Title Filter Patterns
# =======================================
# Purpose: Identify relevant Data, Product, and Delivery roles before LLM classification
# Impact: Reduces classification costs by 60-70% by filtering out Sales, Marketing, HR, Finance, Legal, etc.
#
# Experiment Results (2025-11-26):
# - Tested on Stripe (100+ jobs)
# - Match rate: ~30-40% (aggressive filtering)
# - False negatives: <5% (minimal relevant jobs filtered out)
# - Cost savings: 60-70% reduction in classification costs
#
# Pattern Syntax:
# - Case-insensitive matching
# - Standard regex syntax (| for OR, .* for wildcards, \s for whitespace)
# - Patterns applied with word boundaries for accuracy

# Core title patterns for Data and Product families
relevant_title_patterns:
  # ===== DATA ROLES =====

  # Data Analyst family
  - 'data analyst'
  - 'product analyst'
  - 'growth analyst'
  - 'insight analyst'
  - 'analytics (engineer|lead|manager)'
  - '(manager|lead|director)[,\s]+(data\s+)?analytics'  # Reversed: "Manager, Data Analytics"
  - 'business intelligence|bi (engineer|analyst|developer|lead|manager)'
  - 'bi engineer|bi analyst'

  # Data Engineer family
  - 'data engineer'
  - 'data platform (engineer|manager|lead|architect)'
  - 'data engineering (manager|lead)'
  - '(engineer|manager|lead)[,\s]+data\s+engineering'  # Reversed: "Engineer, Data Engineering"

  # Data Scientist family
  - 'data scientist'
  - 'data science (engineer|manager|lead)'
  - '(scientist|manager|lead|director)[,\s]+data\s+science'  # Reversed: "Scientist, Data Science"
  - 'machine learning scientist'
  - 'research scientist.*(ml|ai|machine learning|data)'
  - 'applied (scientist|ml)'

  # ML/AI Engineer family
  - 'ml engineer|machine learning engineer'
  - 'ai engineer'
  - 'ai/ml'
  - 'mlops'
  - '(ml|machine learning|ai) (engineer|manager|lead|architect)'
  - '^(ml|machine learning|ai)\s+(engineer|manager|lead)'  # "ML Engineer", "AI Manager" at start of title

  # Data Architect family
  - 'data architect'

  # Data/Analytics Leadership (Director+)
  # Use \b word boundaries to avoid matching "Data Center", "Development", "Retail"
  - 'director.*\b(data science|data analytics|data engineering|machine learning|mlops)\b'
  - '\b(data science|data analytics|data engineering|machine learning|mlops)\b.*director'
  - '(vp|vice president).*\b(data science|data analytics|data engineering|machine learning)\b'
  - 'head of (data(?!\s*center)|analytics|data science|machine learning)'
  - 'chief (data|analytics|ai) officer|cdo|cao|caio'

  # ===== PRODUCT ROLES =====

  # Product Manager family
  - 'product manager'
  - 'product owner'
  - 'technical product manager'
  - '(manager|lead|director)[,\s]+product(?!\s*(design|market|operat))'  # Reversed: "Manager, Product" but NOT Product Design/Marketing/Operations

  # Product Leadership (Director+)
  - 'director.*product\s*manag'
  - '(vp|vice president).*product\s*manag'
  - 'head of product(?!\s*(design|market|operat))'
  - 'chief product officer|cpo'

  # Growth PM
  - 'growth (pm|product manager)'

  # Platform/Infrastructure PM
  - 'platform (pm|product manager)'

  # AI/ML Product Manager
  - '(ai|ml|data).*product manager'
  - 'product manager.*(ai|ml|data)'
  - '(ai|ml|data)\s+pm\b'  # "Data PM", "ML PM" (standalone PM only)

  # ===== DELIVERY ROLES =====

  # Delivery Manager family
  - 'delivery manager'
  - 'delivery lead'
  - 'agile delivery manager'
  - 'agile delivery lead'
  - '(manager|lead|director)[,\s]+delivery'  # Reversed: "Manager, Delivery"

  # Project Manager family (CRITICAL: must NOT match "product manager")
  - '(?<!product )project manager'
  - 'technical project manager'
  - 'it project manager'
  - 'senior project manager'

  # Programme Manager family
  - '^(senior |staff |principal |lead )?(technical )?program(me)? manager'
  - '(manager|lead|director)[,\s]+program(me)?s?\b(?!\s*manag)'  # Reversed: "Manager, Programs"

  # Scrum Master family
  - 'scrum master'
  - 'senior scrum master'

  # Agile Coach / Release Manager (routes to scrum_master or delivery_manager)
  - 'agile coach'
  - 'release manager'
  - 'iteration manager'

  # Technical Program Manager (distinct from Technical Product Manager)
  - 'technical program(me)? manager'

  # PMO roles
  - 'pmo (manager|lead|analyst|director)'

  # Delivery Leadership (Director+)
  - 'director.*(delivery|project|program|pmo)'
  - '(delivery|project|program).*director'
  - '(vp|vice president).*(delivery|project|program)'
  - 'head of (delivery|projects|programmes?|pmo)'

# ===== CONFIGURATION =====

# Enable/disable filtering (can be overridden in code)
filtering_enabled: true

# ===== PATTERN NOTES (Documentation) =====
# These notes explain edge cases and design decisions

pattern_notes: |
  Edge Cases Covered:
  - Seniority prefixes: "Senior", "Staff", "Principal", "Lead" automatically matched
  - Analytics variations: "Analytics Engineer", "Analytics Lead", "Analytics Manager"
  - Applied roles: "Applied Scientist", "Applied ML"
  - Combined titles: "AI Product Manager", "Data Product Manager", "ML PM"
  - Reversed "Role, Category" format: "Manager, Data Analytics", "Manager, Delivery", "Lead, Product"

  Known Good Matches (from validation):
  - "Analytics Lead" [OK]
  - "Principal Data Scientist" [OK]
  - "Staff Data PM" [OK]
  - "Senior ML Engineer" [OK]
  - "Applied Research Scientist" [OK]
  - "Data Platform Engineer" [OK]
  - "Senior Data Science Manager" [OK] (added 2025-12-22)
  - "Data Engineering Manager" [OK] (added 2025-12-22)
  - "ML Manager" [OK] (added 2025-12-22)
  - "Associate Director, Analytics" [OK] (added 2025-12-23)
  - "Analytics Director" [OK] (added 2025-12-23)
  - "VP of Data" [OK] (added 2025-12-23)
  - "Head of Data Science" [OK] (added 2025-12-23)
  - "Chief Data Officer" [OK] (added 2025-12-23)
  - "Manager, Data Analytics" [OK] (added 2025-12-31)
  - "Manager, Delivery" [OK] (added 2025-12-31)
  - "Lead, Product" [OK] (added 2025-12-31)
  - "Engineer, ML" [OK] (added 2025-12-31)

  Known Filtered Roles (expected to NOT match):
  - "Account Executive" [NOT OK]
  - "Sales Development Representative" [NOT OK]
  - "Marketing Manager" [NOT OK]
  - "Product Marketing Manager" [NOT OK] (not product management)
  - "Software Engineer" [NOT OK] (unless combined with Data/ML)
  - "DevOps Engineer" [NOT OK]
  - "HR Business Partner" [NOT OK]
  - "Legal Counsel" [NOT OK]
  - "Finance Analyst" [NOT OK] (not data analyst)

  Ambiguous Cases (intentionally excluded):
  - "Software Engineer" - Too broad, would catch backend/frontend/infra roles
  - "Engineer" alone - Way too broad
  - "Analyst" alone - Could be Financial Analyst, Business Analyst (non-data)
  - "Product Marketing" - Marketing role, not core PM
  - "Growth Engineer" - Engineering role, not product/data focus

# Version tracking
version: "1.4"
last_updated: "2025-12-31"
validated_on:
  - company: "Stripe"
    jobs_scraped: 100
    match_rate: 0.34
    false_negatives: "<5%"

changes:
  - version: "1.4"
    date: "2025-12-31"
    notes: "Added reversed title patterns for 'Role, Category' format (e.g., 'Manager, Data Analytics', 'Manager, Delivery')"
  - version: "1.3"
    date: "2025-12-27"
    notes: "Added Delivery family patterns (Delivery Manager, Project Manager, Programme Manager, Scrum Master)"
