### **Scripts (Your Project)**

| File | Purpose | What It Does |
|------|---------|--------------|
| **`fetch_adzuna_jobs.py`** | Main orchestrator | Fetches from Adzuna, calls classifier, stores results |
| **`classifier.py`** | Claude integration | Builds prompt, calls Claude API, returns classification |
| **`db_connection.py`** | Database helpers | Functions to insert/query Supabase |
| **`.env`** | Configuration | API keys (Adzuna, Claude, Supabase) |

---
### **Data Files (Your Project)**

| File | Purpose | What It Contains |
|------|---------|------------------|
| **`docs/schema_taxonomy.yaml`** | Classification rules | Enums, skill ontology, classification guidance |

---
### **External Services**

| Service | Purpose | What It Provides |
|---------|---------|------------------|
| **Adzuna API** | Job data source | Raw job postings (title, company, description) |
| **Claude API (Anthropic)** | LLM classifier | Structured classification of jobs |
| **Supabase (Postgres)** | Database | Stores raw jobs + enriched/classified jobs |

---
## Data Flow Diagram
```
┌─────────────────┐
│  Adzuna API     │  Returns JSON with job details
└────────┬────────┘
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│  fetch_adzuna_jobs.py                                   │
│                                                          │
│  1. format_job_for_classification()                     │
│     → Converts JSON to readable text                    │
│                                                          │
│  2. check_if_job_exists()                              │
│     → Queries Supabase to avoid duplicates              │
│                                                          │
│  3. insert_raw_job() [from db_connection.py]           │
│     → Stores raw job text in Supabase                   │
│                                                          │
│  4. classify_job_with_claude() [from classifier.py]    │
│     → Sends to Claude, gets structured classification   │
│                                                          │
│  5. insert_enriched_job() [from db_connection.py]      │
│     → Stores classified job in Supabase                 │
└─────────────────────────────────────────────────────────┘
         │                            │
         ▼                            ▼
┌─────────────────┐        ┌──────────────────┐
│  Claude API     │        │  Supabase DB     │
│  (Anthropic)    │        │                  │
│                 │        │  Tables:         │
│  Reads:         │        │  - raw_jobs      │
│  schema_        │        │  - enriched_jobs │
│  taxonomy.yaml  │        └──────────────────┘
└─────────────────┘